{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { useRef, useState, useEffect, createRef } from 'react'\n// import builtInValidators from './utils/builtIns'\n\nexport const useValidator = () => {\n  const elements = useRef(new Map())\n  const touchedElements = useRef(new Map())\n  const dirtyElements = useRef(new Map())\n  const errors = createRef({})\n\n  const submitForm = (fn) => (e) => {\n    e.preventDefault()\n    console.log('validator formSubmit')\n    fn()\n  }\n\n  const track = (elem, rules) => {\n    const ref = createRef(null)\n    ref.current = elem\n    elements.current.set(elem, {\n      touched: false,\n      dirty: false,\n      value: null,\n      valid: true,\n      rules\n    })\n\n    ref.current.onchange = partialOnChange(ref)\n    ref.current.onfocus = partialOnFocus(ref)\n  }\n\n  const partialOnChange = (ref) => (e) =>\n    console.log('second onChange ', e.target.value, ref)\n\n  const partialOnFocus = (ref) => (e) => {\n    touchedElements.current.set(ref)\n    ref.current.onfocus = ''\n    console.log('second onFocus ', e.target.value, ref)\n  }\n\n  return [track, submitForm, errors]\n}\n"],"names":["useValidator","elements","useRef","Map","touchedElements","dirtyElements","errors","createRef","submitForm","fn","e","preventDefault","console","log","track","elem","rules","ref","current","set","touched","dirty","value","valid","onchange","partialOnChange","onfocus","partialOnFocus","target"],"mappings":";;IAIaA,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC,MAAMC,QAAQ,GAAGC,YAAM,CAAC,IAAIC,GAAJ,EAAD,CAAvB;AACA,MAAMC,eAAe,GAAGF,YAAM,CAAC,IAAIC,GAAJ,EAAD,CAA9B;AACA,MAAME,aAAa,GAAGH,YAAM,CAAC,IAAIC,GAAJ,EAAD,CAA5B;AACA,MAAMG,MAAM,GAAGC,eAAS,CAAC,EAAD,CAAxB;;AAEA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD;AAAA,WAAQ,UAACC,CAAD,EAAO;AAChCA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAJ,MAAAA,EAAE;AACH,KAJkB;AAAA,GAAnB;;AAMA,MAAMK,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD,EAAOC,KAAP,EAAiB;AAC7B,QAAMC,GAAG,GAAGV,eAAS,CAAC,IAAD,CAArB;AACAU,IAAAA,GAAG,CAACC,OAAJ,GAAcH,IAAd;AACAd,IAAAA,QAAQ,CAACiB,OAAT,CAAiBC,GAAjB,CAAqBJ,IAArB,EAA2B;AACzBK,MAAAA,OAAO,EAAE,KADgB;AAEzBC,MAAAA,KAAK,EAAE,KAFkB;AAGzBC,MAAAA,KAAK,EAAE,IAHkB;AAIzBC,MAAAA,KAAK,EAAE,IAJkB;AAKzBP,MAAAA,KAAK,EAALA;AALyB,KAA3B;AAQAC,IAAAA,GAAG,CAACC,OAAJ,CAAYM,QAAZ,GAAuBC,eAAe,CAACR,GAAD,CAAtC;AACAA,IAAAA,GAAG,CAACC,OAAJ,CAAYQ,OAAZ,GAAsBC,cAAc,CAACV,GAAD,CAApC;AACD,GAbD;;AAeA,MAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAACR,GAAD;AAAA,WAAS,UAACP,CAAD;AAAA,aAC/BE,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,CAAC,CAACkB,MAAF,CAASN,KAAzC,EAAgDL,GAAhD,CAD+B;AAAA,KAAT;AAAA,GAAxB;;AAGA,MAAMU,cAAc,GAAG,SAAjBA,cAAiB,CAACV,GAAD;AAAA,WAAS,UAACP,CAAD,EAAO;AACrCN,MAAAA,eAAe,CAACc,OAAhB,CAAwBC,GAAxB,CAA4BF,GAA5B;AACAA,MAAAA,GAAG,CAACC,OAAJ,CAAYQ,OAAZ,GAAsB,EAAtB;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,CAAC,CAACkB,MAAF,CAASN,KAAxC,EAA+CL,GAA/C;AACD,KAJsB;AAAA,GAAvB;;AAMA,SAAO,CAACH,KAAD,EAAQN,UAAR,EAAoBF,MAApB,CAAP;AACD;;;;"}