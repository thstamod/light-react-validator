{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport { useRef, useState, useEffect, createRef } from 'react'\n// import builtInValidators from './utils/builtIns'\n\nexport const useValidator = () => {\n  const elements = useRef(new Map())\n  const touchedElements = useRef(new Map())\n  const dirtyElements = useRef(new Map())\n  const errors = createRef({})\n\n  const submitForm = (fn) => (e) => {\n    e.preventDefault()\n    console.log('validator formSubmit')\n    fn()\n  }\n\n  const track = (elem, rules) => {\n    const ref = createRef(null)\n    ref.current = elem\n    elements.current.set(elem, {\n      touched: false,\n      dirty: false,\n      value: null,\n      valid: true,\n      rules\n    })\n\n    ref.current.onchange = partialOnChange(ref)\n    ref.current.onfocus = partialOnFocus(ref)\n  }\n\n  const partialOnChange = (ref) => (e) =>\n    console.log('second onChange ', e.target.value, ref)\n\n  const partialOnFocus = (ref) => (e) => {\n    touchedElements.current.set(ref)\n    ref.current.onfocus = ''\n    console.log('second onFocus ', e.target.value, ref)\n  }\n\n  return [track, submitForm, errors]\n}\n"],"names":["useValidator","elements","useRef","Map","touchedElements","dirtyElements","errors","createRef","submitForm","fn","e","preventDefault","console","log","track","elem","rules","ref","current","set","touched","dirty","value","valid","onchange","partialOnChange","onfocus","partialOnFocus","target"],"mappings":";;MAIaA,YAAY,GAAG,MAAM;AAChC,QAAMC,QAAQ,GAAGC,MAAM,CAAC,IAAIC,GAAJ,EAAD,CAAvB;AACA,QAAMC,eAAe,GAAGF,MAAM,CAAC,IAAIC,GAAJ,EAAD,CAA9B;AACA,QAAME,aAAa,GAAGH,MAAM,CAAC,IAAIC,GAAJ,EAAD,CAA5B;AACA,QAAMG,MAAM,GAAGC,SAAS,CAAC,EAAD,CAAxB;;AAEA,QAAMC,UAAU,GAAIC,EAAD,IAASC,CAAD,IAAO;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAJ,IAAAA,EAAE;AACH,GAJD;;AAMA,QAAMK,KAAK,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC7B,UAAMC,GAAG,GAAGV,SAAS,CAAC,IAAD,CAArB;AACAU,IAAAA,GAAG,CAACC,OAAJ,GAAcH,IAAd;AACAd,IAAAA,QAAQ,CAACiB,OAAT,CAAiBC,GAAjB,CAAqBJ,IAArB,EAA2B;AACzBK,MAAAA,OAAO,EAAE,KADgB;AAEzBC,MAAAA,KAAK,EAAE,KAFkB;AAGzBC,MAAAA,KAAK,EAAE,IAHkB;AAIzBC,MAAAA,KAAK,EAAE,IAJkB;AAKzBP,MAAAA;AALyB,KAA3B;AAQAC,IAAAA,GAAG,CAACC,OAAJ,CAAYM,QAAZ,GAAuBC,eAAe,CAACR,GAAD,CAAtC;AACAA,IAAAA,GAAG,CAACC,OAAJ,CAAYQ,OAAZ,GAAsBC,cAAc,CAACV,GAAD,CAApC;AACD,GAbD;;AAeA,QAAMQ,eAAe,GAAIR,GAAD,IAAUP,CAAD,IAC/BE,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,CAAC,CAACkB,MAAF,CAASN,KAAzC,EAAgDL,GAAhD,CADF;;AAGA,QAAMU,cAAc,GAAIV,GAAD,IAAUP,CAAD,IAAO;AACrCN,IAAAA,eAAe,CAACc,OAAhB,CAAwBC,GAAxB,CAA4BF,GAA5B;AACAA,IAAAA,GAAG,CAACC,OAAJ,CAAYQ,OAAZ,GAAsB,EAAtB;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,CAAC,CAACkB,MAAF,CAASN,KAAxC,EAA+CL,GAA/C;AACD,GAJD;;AAMA,SAAO,CAACH,KAAD,EAAQN,UAAR,EAAoBF,MAApB,CAAP;AACD;;;;"}